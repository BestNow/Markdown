

# 笛卡尔坐标系

## 一维数学

### short、int、float和double



## 二维笛卡尔空间

<img src="Image/图1.5 二维笛卡尔坐标空间.png" alt="图1.5 二维笛卡尔坐标空间" style="zoom:50%;" />
图1.5 二维笛卡尔坐标空间

<img src="Image/图1.6 计算机屏幕坐标系.png" alt="图1.6 计算机屏幕坐标系" style="zoom:50%;" />
图1.6 计算机屏幕坐标系

<img src="Image/图1.7 二维坐标空间中可能的地图轴向.png" alt="图1.7 二维坐标空间中可能的地图轴向" style="zoom: 67%;" />
图1.7 二维坐标空间中可能的地图轴向

无论为x轴和y轴选择了什么方向，总是可以旋转坐标空间，使+x 指向右边，+y 指向上方。



## 三维笛卡尔空间

### 新增维度和轴

在三维中，需要3个轴来建立坐标系。前两个轴分别称为x轴和轴，就像在二维中一样(当然，说它们与二维轴相同是不准确的，稍后会有更详细的解释)。将第三个轴(可预测地)称为z轴。一般来说，会进行设置以使所有轴相互垂直即每个轴垂直于其他轴。
<img src="Image/图1.10 三维笛卡尔坐标空间.png" alt="图1.10 三维笛卡尔坐标空间" style="zoom:50%;" />
图1.10 三维笛卡尔坐标空间

### 左手与右手坐标空间

伸出左手，用拇指和食指做出一个L形@拇指指向右边，食指朝上。现在伸展你的第三根手指，使它直接指向前方。这样就形成了一个左手坐标系。拇指、食指和第三根手指分别指向+x、+y和+z 方向。
<img src="Image/图1.13 左右手坐标空间.png" alt="图1.13 左右手坐标空间" style="zoom: 50%;" />
图1.13 左右手坐标空间

左手规则的工作方式如下：将左手摆出一个“竖起大拇指”的位置，拇指指向旋转轴的正值端。此时，围绕旋转轴的正向旋转方向就是手指卷曲的方向。右手坐标空间也有相应的规则。
<img src="Image/图1.14 左手规则和右手规则定义哪个方向被视为正向旋转.png" alt="图1.14 左手规则和右手规则定义哪个方向被视为正向旋转" style="zoom:50%;" />
图1.14 左手规则和右手规则定义哪个方向被视为正向旋转

在左手坐标系中，正向旋转从轴的正端看时是顺时针(Clockwise)旋转的；而在右手标系中，正向旋转是逆时针 (Counterclockwise)旋转的。

切换坐标系的旋向性：交换一个轴的正负端；交换两个轴。

本书使用左手坐标系约定

## 基础知识

### 求和和求积表示法

$$
\sum^{6}_{i=1}a_i = a_1 + a_2 + a_3 + a_4 + a_5 + a_6
$$

$$
\prod^{n}_{i=1}a_i = a_1 \cross a_2 \cross \cdots \cross a_{n-1} \cross a_n
$$

### 区间符号

闭区间、开区间

### 角度、度数和弧度

人类通常使用度(Degree)数来测量角度
一度表示旋转 1/360，因此360°代表旋转完整的一圈

然而，数学家更喜欢以弧度 (Radian)为单位测量角度，弧度是基于圆的属性的度量单位
当以弧度指定两条线之间的角度时，实际上是测量单位圆(以半径为1的原点为中心的圆)的截取弧的长度

<img src="Image/图1.16 弧度测量单位圆上的弧长.png" alt="图1.16 弧度测量单位圆上的弧长" style="zoom:50%;" />
图1.16 弧度测量单位圆上的弧长
$$
360°=2\pi\ rad \\
180°=\pi\ rad
$$

### 三角函数

$\cos$、$\sin$、$\sec$、$\tan$、$\csc$、$\cot$

对于单位圆来说：
$$
\sec\theta = \frac{1}{\cos\theta} \\
\tan\theta = \frac{\sin\theta}{\cos\theta} \\
\csc\theta = \frac{1}{\sin\theta} \\
\cot\theta = \frac{1}{\tan\theta} = \frac{\cos\theta}{\sin\theta}
$$
<img src="Image/图1.18 斜边、邻边和对边示意图.png" alt="图1.18 斜边、邻边和对边示意图" style="zoom:50%;" />
图1.18 斜边、邻边和对边示意图
$$
\cos\theta = \frac{adj}{hyp}, \ \ 
\sin\theta = \frac{opp}{hyp}, \ \ 
\tan\theta = \frac{opp}{adj}, \\ 
\sec\theta = \frac{hyp}{adj}, \ \ 
\csc\theta = \frac{hyp}{opp}, \ \ 
\cot\theta = \frac{adj}{opp}.
$$

### 三角函数的恒等式

$$
\sin(-\theta) = - \sin \theta, \ \ \cos(-\theta) = \cos\theta, \ \ \tan(-\theta) = -\tan\theta \\
\sin(\frac{\pi}{2} - \theta) = \cos\theta \\
\cos(\frac{\pi}{2} -\theta) = \sin\theta \\
\tan(\frac{\pi}{2} - \theta) = \cot\theta
$$

毕达哥拉斯恒等式
$$
\sin^2\theta + \cos^2\theta = 1, \\
1 + \tan^2\theta = \sec^2\theta \\
1 + \cot^2\theta = \csc^2\theta
$$
和或差恒等式
$$
\sin(a+b) =\sin a\cos b + \cos a \sin b \\
\sin(a-b) = \sin a\cos b - \cos a \sin b \\
\cos(a+b) = \cos a\cos b - \sin a \sin b \\
\cos(a-b) = \cos a\cos b + \sin a \sin b \\
\tan(a+b) = \frac{\tan a + \tan b}{1 - \tan a \tan b} \\
\tan(a-b) = \frac{\tan a - \tan b}{1 + \tan a \tan b}
$$
等腰三角形恒等式
$$
\sin2\theta = 2\sin\theta\cos\theta \\
\cos2\theta = \cos^2\theta - \sin^2\theta = 2\cos^2\theta - 1 = 1 - 2\sin^2\theta \\
\tan2\theta = \frac{2\tan\theta}{1 - \tan^2\theta}
$$
正弦定理
$$
\frac{\sin A}{a} = \frac{\sin B}{b} = \frac{\sin C}{c}
$$
余弦定理
$$
a^2 = b^2 + c^2 - 2bc\cos A \\
b^2 = a^2 + c^2 - 2ac\cos B \\
c^2 = a^2 + b^2 - 2ab\cos C
$$
正弦定理和余弦定理适用于任何三角形



# 矢量

向量下标表示法
$$
\bold{a} = \begin{bmatrix}
1 \\
2
\end{bmatrix}
\begin{cases}
a_1 = a_x = 1 \\
a_2 = a_y = 2
\end{cases} \\
\bold{b} = \begin{bmatrix}
3 \\
4 \\
5
\end{bmatrix}
\begin{cases}
b_1 = b_x = 3 \\
b_2 = b_y = 4 \\
b_3 = b_z = 5
\end{cases} \\
\bold{c} = \begin{bmatrix}
6 \\
7 \\
8 \\
9
\end{bmatrix}
\begin{cases}
c_1 = c_x = 6 \\
c_2 = c_y = 7 \\
c_3 = c_z = 8 \\
c_4 = c_w = 9 \\
\end{cases}
$$

## 矢量的几何定义

矢量的大小：矢量的长度，矢量可以具有任何非负长度。

矢量的方向：矢量在空间中指向的方向。



## 使用笛卡尔坐标指定矢量

### 作为位移序列的矢量

顺序不重要，任意逐步位移

### 零矢量

$$
\bold{0} = \begin{bmatrix}
0 \\
0 \\
\cdot \\
\cdot \\
\cdot \\
0
\end{bmatrix}
$$

零矢量没有大小，没有方向
零矢量+ 任意矢量 = 任意矢量

点：有位置没有尺寸和厚度
矢量：有大小和方向



## 矢量与点

<img src="Image/图2.7 点和矢量之间的关系.png" alt="图2.7 点和矢量之间的关系" style="zoom:50%;" />
图2.7 点和矢量之间的关系



## 负矢量

$$
-\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_{n}
\end{bmatrix} = 
\begin{bmatrix}
-a_1 \\
-a_2 \\
\cdot \\
\cdot \\
\cdot \\
-a_{n-1} \\
-a_{n}
\end{bmatrix}
$$

<img src="Image/图2.8.png" alt="图2.8" style="zoom:50%;" />
图 2.8 矢量及其变负结果的示例，矢量及其负矢量是平行的，并且具有相同的大小，但是方向则是相反的



## 标量和矢量的乘法

$$
k\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_{n}
\end{bmatrix}  = 
\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_{n}
\end{bmatrix} k = 
\begin{bmatrix}
ka_1 \\
ka_2 \\
\cdot \\
\cdot \\
\cdot \\
ka_{n-1} \\
ka_{n}
\end{bmatrix}
$$

<img src="Image/图2.9.png" alt="图2.9" style="zoom:50%;" />
图2.9 将二维矢量乘以不同标量的结果图示



## 矢量的加法和减法

矢量加法
$$
\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_{n}
\end{bmatrix} + 
\begin{bmatrix}
b_1 \\
b_2 \\
\cdot \\
\cdot \\
\cdot \\
b_{n-1} \\
b_{n}
\end{bmatrix} = 
\begin{bmatrix}
a_1 + b_1 \\
a_2 + b_2\\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} + b_{n-1}\\
a_{n} + b_n
\end{bmatrix}
$$
矢量减法
$$
\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_{n}
\end{bmatrix} - 
\begin{bmatrix}
b_1 \\
b_2 \\
\cdot \\
\cdot \\
\cdot \\
b_{n-1} \\
b_{n}
\end{bmatrix} =
\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_{n}
\end{bmatrix} + 
\begin{pmatrix}-\begin{bmatrix}
b_1 \\
b_2 \\
\cdot \\
\cdot \\
\cdot \\
b_{n-1} \\
b_{n}
\end{bmatrix}\end{pmatrix} = \begin{bmatrix}
a_1 - b_1 \\
a_2 - b_2\\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} - b_{n-1}\\
a_{n} - b_n
\end{bmatrix}
$$
<img src="Image/图2.10.png" alt="图2.10" style="zoom: 67%;" />
图2.10 使用三角形法则的二维矢量加法和减法

## 矢量大小

矢量的大小也称为矢量的长度或范数。

### 正式线性代数规则

任意维数的矢量的大小
$$
\|\bold{v}\| = \sqrt{\sum^n_{i=1}v_i^2} = \sqrt{v_1^2+v_2^2+\cdots+v_{n-1}^2+v_n^2}
$$

## 单位矢量

单位矢量(Unit Vector)是大小为1的矢量
单位矢量也称为归一化矢量 (Normalized Vector)

矢量的归一化
$$
\hat{\bold{v}} = \frac{\bold{v}}{\|\bold{v}\|} \ \ \bold{v}是任意非零矢量
$$

## 距离公式

三维距离公式
$$
distance(\bold{a}, \bold{b}) = \|\bold{b}-\bold{a}\| = \sqrt{(b_x - a_x)^2 + (b_y-a_y)^2+(b_z-a_z)^2}
$$
二维距离公式
$$
distance(\bold{a}, \bold{b}) = \|\bold{b}-\bold{a}\| = \sqrt{(b_x-a_x)^2+(b_y-a_y)^2}
$$

## 矢量点积

矢量点积在加法和减法之前执行，除非使用括号来覆盖此默认运算顺序
$$
\begin{bmatrix}
a_1 \\
a_2 \\
\cdot \\
\cdot \\
\cdot \\
a_{n-1} \\
a_n
\end{bmatrix} \cdot
\begin{bmatrix}
b_1 \\
b_2 \\
\cdot \\
\cdot \\
\cdot \\
b_{n-1} \\
b_n
\end{bmatrix} = 
a_1b_1 + a_2b_2 + \cdots+a_{n-1}b_{n-1}+a_nb_n
$$

$$
\bold{a}\cdot\bold{b} = \sum^{n}_{i=1}a_ib_i
$$

假设$\hat{\bold{a}}$是一个单位矢量，$\bold{b}$ 是一个任意长度的矢量
现在取$\bold{b}$并将其投影到与$\hat{\bold{a}}$平行的线上
将点积$\hat{\bold{a}}\cdot \bold{b}$定义为$\bold{b}$投影在该线上的有符号长度
![图2.17](Image/图2.17.png)
图2.17 点积作为投影

点积测量有符号长度意味着什么？
这意味着当$ \bold{b} $的投影指向$\hat{\bold{a}}$的相反方向时，该值将为负，并且当$\hat{\bold{a}}$和$ \bold{b} $垂直时，投影具有零长度(它是单个点)
<img src="Image/图2.18.png" alt="图2.18" style="zoom:50%;" />
图2.18 点积的标志

点积与任意矢量和标量的乘法的结合律
$$
(k\bold{a})\cdot \bold{b} = k(\bold{a}\cdot \bold{b}) = \bold{a}\cdot (k\bold{b})
$$
点积是可交换的
$$
\bold{a}\cdot \bold{b} = a_xb_x + a_yb_y = b_xa_x+b_ya_y = \bold{b}\cdot \bold{a}
$$
点积通过加法和减法进行分布
$$
\bold{a}\cdot (\bold{b} + \bold{c}) = \begin{bmatrix}
a_x \\
a_y \\
a_z
\end{bmatrix} \cdot
\begin{bmatrix}
b_x + c_x \\
b_y + c_y \\
b_z + c_z
\end{bmatrix} \\
= a_x(b_x+c_x) + a_y(b_y+c_y)+a_z(b_z+c_z)\\
= a_xb_x + a_xc_x + a_yb_y + a_yc_y + a_zb_z + a_zc_z \\
= (a_xb_x + a_yb_y + a_zb_z) + (a_xc_x + a_yc_y + a_zc_z) \\
= \bold{a}\cdot\bold{b} + \bold{a}\cdot \bold{c}
$$
<img src="Image/图2.22.png" alt="图2.22" style="zoom:50%;" />
图2.22 点积通过加法分布

使用点积计算两个矢量之间的角度
$$
\theta = \arccos \left(
\frac{\bold{a}\cdot \bold{b}}{\|\bold{a}\|\|\bold{b}\|}
\right)
$$
计算两个单位矢量之间的角度
$$
\theta = \arccos\left( \hat{\bold{a}}\cdot \hat{\bold{b}} \right) \ \ 假设\hat{\bold{a}}和\hat{\bold{b}}都是单位矢量
$$
点积的符号可以用作两个矢量之间角度的粗略分类

| $\bold{a}\cdot\bold{b}$ | $\theta$              | 角度为 | $\bold{a}$和$\bold{b}$是 |
| ----------------------- | --------------------- | ------ | ------------------------ |
| $> 0 $                  | $0° ≤ \theta < 90°$   | 锐角   | 主要指向同一方向         |
| $0$                     | $\theta = 90°$        | 直角   | 垂直                     |
| $< 0$                   | $90° < \theta ≤ 180°$ | 钝角   | 主要指向相反方向         |



## 矢量叉乘

$$
\begin{bmatrix}
x_1 \\
y_1 \\
z_1 \\
\end{bmatrix} \cross
\begin{bmatrix}
x_2 \\
y_2 \\
z_2 \\
\end{bmatrix} = 
\begin{bmatrix}
y_1z_2 - z_1y_2 \\
z_1x_2 - x_1z_2 \\
x_1y_2 - y_1x_2
\end{bmatrix}
$$

叉积将产生一个矢量，垂直于原始的两个矢量
叉乘的大小与矢量之间的角度的正弦值有关，也等于由两个边$\bold{a}$和$\bold{b}$形成的平行四边形的面积
$$
\|\bold{a}\cross \bold{b}\| = \|\bold{a}\|\|\bold{b}\|\sin\theta
$$
可以通过将$\bold{b}$的尾部放在 $\bold{a}$ 的头部来确定$\bold{a} \cross \bold{b}$的方向并检查是否从$\bold{a}$到$\bold{b}$顺时针或逆时针转动
	在左手坐标系中:
		如果矢量$\bold{a}$和$\bold{b}$从你的视点顺时针转动，则$\bold{a}\cross \bold{b}$指向你；如果$\bold{a}$和$\bold{b}$逆时针转动，则指向远离你的方向
	在右手坐标系中，恰好相反:
		如果$\bold{a}$和$\bold{b}$进行逆时针转动，则$\bold{a}\cross\bold{b}$指向你；如果$\bold{a}$和$\bold{b}$指向顺时针转动，则$\bold{a}\cross\bold{b}$指向远离你的方向

基本轴的叉乘
$$
\hat{\bold{x}}\cross \hat{\bold{y}} = \hat{\bold{z}} \ \ \ \ \ \ 
\hat{\bold{y}}\cross \hat{\bold{x}} = -\hat{\bold{z}} \\
\hat{\bold{y}}\cross \hat{\bold{z}} = \hat{\bold{x}} \ \ \ \ \ \ 
\hat{\bold{z}}\cross \hat{\bold{y}} = -\hat{\bold{x}} \\
\hat{\bold{z}}\cross \hat{\bold{x}} = \hat{\bold{y}} \ \ \ \ \ \ 
\hat{\bold{x}}\cross \hat{\bold{z}} = -\hat{\bold{y}} \\
$$
叉积的最重要用途之一是创建一个垂直于平面、三角形或多边形的矢量。



## 线性代数恒等式

|                            恒等式                            |                          简要说明                          |
| :----------------------------------------------------------: | :--------------------------------------------------------: |
|          $\bold{a} +\bold{b} = \bold{b} + \bold{a}$          |                     矢量加法的交换性质                     |
|        $\bold{a} - \bold{b} = \bold{a} + (-\bold{b})$        |                       矢量减法的定义                       |
| $(\bold{a}+\bold{b}) + \bold{c} = \bold{a} + (\bold{b} + \bold{c})$ |                     矢量加法的结合性质                     |
|                $s(t\bold{a}) = (st)\bold{a}$                 |                     标量乘法的结合性质                     |
|       $k(\bold{a} + \bold{b}) = k\bold{a} + k\bold{b}$       |                  标量乘法分布在矢量加法上                  |
|              $\|k\bold{a}\| = |k|\|\bold{a}\|$               |       将矢量乘以标量将会按标量绝对值的因子缩放其大小       |
|                      $\|\bold{a}\| ≥ 0$                      |                     矢量的大小是非负的                     |
| $\|\bold{a}\|^2 + \|\bold{b}\|^2 = \|\bold{a} + \bold{b}\|^2$ |                毕达哥拉斯定理适用于矢量加法                |
|   $\|\bold{a}\| + \|\bold{b}\| ≥ \|\bold{a} + \bold{b}\|$    |    矢量加法的三角法则(任何一边都不得超过另外两边的总和)    |
|      $\bold{a}\cdot \bold{b} = \bold{b}\cdot \bold{a}$       |                       点积的交换性质                       |
|        $\|\bold{a}\| = \sqrt{\bold{a}\cdot\bold{a}}$         |                   使用点积定义的矢量大小                   |
| $k(\bold{a}\cdot\bold{b}) = (k\bold{a})\cdot\bold{b} = \bold{a}\cdot (k\bold{b})$ |                  标量乘法与点积的结合性质                  |
| $\bold{a}\cdot (\bold{b} + \bold{c}) = \bold{a}\cdot \bold{b} + \bold{a}\cdot \bold{c}$ |                 点积分布在矢量加法和减法上                 |
|             $\bold{a}\cross \bold{a} = \bold{0}$             | 任何矢量与其自身的叉积是零矢量(因为任何矢量都与其自身平行) |
|     $\bold{a}\cross\bold{b} = -(\bold{b}\cross\bold{a})$     |                       叉积是反交换的                       |
|   $\bold{a}\cross\bold{b} = (-\bold{a})\cross(-\bold{b})$    |          让叉积的两个运算项都变负会产生相同的矢量          |
| $k(\bold{a}\cross\bold{b}) = (k\bold{a})\cross\bold{b} = \bold{a}\cross(k\bold{b})$ |                  标量乘法与叉积的结合性质                  |
| $\bold{a}\cross (\bold{b} + \bold{c}) = \bold{a}\cross \bold{b} + \bold{a}\cross \bold{c}$ |                 叉积分布在矢量加法和减法上                 |



# 多个坐标空间

使用多个坐标空间的原因是，某些信息仅在特定参考帧的环境中是已知的。

## 一些有用的空间坐标

### 世界空间

世界坐标系(World Coordinate System)是一个特殊的坐标系，它为所有其他要指定的坐标系建立了一个“全局”参考系
换句话说，可以用世界坐标空间来表达其他坐标空间的位置，但是不能用任何更大的外部坐标空间来表示世界坐标空间

世界坐标空间也称为全局(Global)坐标空间或通用(Universal)坐标空间



### 对象空间

对象空间(Object Space)是与特定对象关联的坐标空间。每个对象都有自己独立的对象空间。



### 相机空间

在相机空间中，相机位于原点，
	+x 指向右侧，
	+z 指向前方(进入屏幕，相机朝向的方向)，
	+y 指向“向上” (注意，这里不是相对于世界的“向上”而是相对于相机顶部的“向上”)
<img src="Image/图3.1.png" alt="图3.1" style="zoom:50%;" />
图3.1 使用左手惯例的相机空间

### 直立空间

在某种意义上，对象的直立空间是世界空间与其对象空间之间的“中间过渡”
因为直立空间的轴线与世界空间的轴线平行，而直立空间的原点则与对象空间的原点重合
<img src="Image/图3.2.png" alt="图3.2" style="zoom:67%;" />
图3.2 对象空间(Object space)、直立空间(Upright space)和世界空间(World space)

<img src="Image/图3.3.png" alt="图3.3" style="zoom:50%;" />
图3.3 通过平移可实现在世界空间和直立空间之间的转换；通过旋转可实现在直立空间和对象空间之间的转换



## 基矢量和坐标空间转换

将所有物体从世界空间转换为摄像机空间，先相反方向移动相机，再旋转相机
<img src="Image/图3.9.png" alt="图3.9" style="zoom:50%;" />
图3.9 通过平移和旋转的方式，将所有东西都从世界空间变换到相机空间

主动变换（Active Transformation）：通过移动整个世界来将相机放在原点，从而计算来自世界空间坐标的相机空间坐标。描述点的坐标**空间保持不变**，对在空间中移动的点进行成像。

被动变换（Passive Transformation）：想象移动用于描述这些点的坐标空间时，这些点是静止的，移动的空间坐标系。

![](Image/图3.4.png)
图3.10 从两个视角观察相同的坐标空间变换序列在“绝对视角”列，看起来好像是对象在移动，坐标轴是静止的；在“局部视角”列，对象看起来是静止的，而坐标空间轴在转换。

设$\bold{b}$是一些任意点，其对象空间坐标$\bold{b} = (b_x, b_y)$是已知的
设$\bold{w} = (w_x, w_y)$表示同一点的世界坐标
	已知原点$\bold{o}$和左$\bold{p}$、上$\bold{q}$方向的世界空间坐标
$$
\bold{w} = \bold{o} + b_x\bold{p} + b_y\bold{q}
$$
坐标的秩：描述基所跨越的空间中的维数的术语是基的秩。
满秩：n个基矢量，他们的跨度是n维空间，则称为满秩。
如果一组基矢量是线性无关的，则不可能将任何一个基矢量表示为其它基矢量的线性组合



对象空间的基矢量：$\bold{p}$、$\bold{q}$、$\bold{r}$，物体空间坐标$\bold{b} = [b_x, b_y, b_z]$，同一矢量直立空间对应坐标$\bold{u} = [u_x, u_y, u_z]$
$$
\bold{u} = b_x\bold{p} + b_y\bold{q} + b_z\bold{r} \\
或 \\
u_x = b_xp_x + b_yq_x + b_zr_x \\
u_y = b_xp_y + b_yq_y + b_zr_y \\
u_z = b_xp_z + b_yq_z + b_zr_z
$$

$$
?_x = b_xp_x + b_yq_x + b_zr_x \\
?_y = b_xp_y + b_yq_y + b_zr_y \\
?_z = b_xp_z + b_yq_z + b_zr_z
$$

$?$直接求
$$
u_x = ?_xp_x + ?_yq_x + ?_zr_x \\
u_y = ?_xp_y + ?_yq_y + ?_zr_y \\
u_z = ?_xp_z + ?_yq_z + ?_zr_z
$$
有3个相互关联的方程式，这3个方程式缺了任何一个都不能确定任何未知量





# 矩阵简介

## 矩阵的数学定义

矢量是标量的数组，而矩阵则是矢量的数组。

### 矩阵维度和表示法

对于具有$r$行和$c$列的矩阵,为是$r \cross c$(读作“$r 乘 c$”)矩阵
$$
\begin{bmatrix}
4 & 0 & 12 \\
-5 & \sqrt{4} & 3 \\
12 & -4/3 & -1 \\
1/2 & 18 & 0
\end{bmatrix}
$$
矩阵元素的下标表示法
$$
\begin{bmatrix}
m_{11} & m_{12} & m_{13} \\
m_{21} & m_{22} & m_{23} \\
m_{31} & m_{32} & m_{33}
\end{bmatrix}
$$

### 方形矩阵

具有相同行数和列数的矩阵称为方形矩阵(Square Matrice)

$3\cross 3$矩阵的对角元素
$$
\begin{bmatrix}
m_{11} & m_{12} & m_{13} \\
m_{21} & m_{22} & m_{23} \\
m_{31} & m_{32} & m_{33} \\
\end{bmatrix}
$$
如果矩阵中的所有非对角元素都为零，则该矩阵为对角矩阵(Diagonal Matrix)
$$
\begin{bmatrix}
3 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & -5 & 0 \\
0 & 0 & 0 & 2
\end{bmatrix}
$$
三维单位矩阵
$$
\bold{I}_3 = \begin{bmatrix}
1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1\\
\end{bmatrix}
$$

### 作为矩阵的矢量

行矢量和列矢量
$$
\begin{bmatrix}
1 & 2 & 3
\end{bmatrix} \\
\begin{bmatrix}
1 \\
2\\
3
\end{bmatrix}
$$

### 矩阵转置

$\bold{M}_{ij}^T = \bold{M}_{ji}$
$$
\begin{bmatrix}
1 & 2 & 3 \\
4 & 5 & 6 \\
7 & 8 & 9 \\
10 & 11 & 12 \\
\end{bmatrix}^T
= \begin{bmatrix}
1 & 4 & 7 & 10 \\
2 & 5 & 8 & 11 \\
3 & 6 & 9 & 12 
\end{bmatrix}
$$

$$
\begin{bmatrix}
a & b & c \\
d & e & f \\
g & h & i 
\end{bmatrix}^T = 
\begin{bmatrix}
a & d & g \\
b & e & h \\
c & f & i \\
\end{bmatrix}
$$

转置将转换行矢量和列矢量
$$
\begin{bmatrix}
x & y & z 
\end{bmatrix}^T = 
\begin{bmatrix}
x \\
y\\
z
\end{bmatrix} \ \ \ \ \
\begin{bmatrix}
x \\
y\\
z
\end{bmatrix}^T = \begin{bmatrix}
x & y & z 
\end{bmatrix}
$$

### 矩阵与标量相乘

$$
k\bold{M} = k\begin{bmatrix}
m_{11} & m_{12} & m_{13} \\
m_{21} & m_{22} & m_{23} \\
m_{31} & m_{32} & m_{33} 
\end{bmatrix} = \begin{bmatrix}
km_{11} & km_{12} & km_{13} \\
km_{21} & km_{22} & km_{23} \\
km_{31} & km_{32} & km_{33} 
\end{bmatrix}
$$

### 两个矩阵相乘

一个$r\cross n$矩阵$\bold{A}$可以乘以一个$n\cross c$矩阵$\bold{B}$，结果是一个$r\cross c$矩阵。
$$
c_{ij} = \sum^n_{k = 1}a_{ik}b_{kj}
$$

$$
\bold{A}\bold{B} = \begin{bmatrix}
a_{11} & a_{12} \\
a_{21} & a_{22}
\end{bmatrix}
\begin{bmatrix}
b_{11} & b_{12} \\
b_{21} & b_{22}
\end{bmatrix} = \begin{bmatrix}
a_{11}b_{11} + a_{12}b_{21} & a_{11}b_{12} + a_{12}b_{22} \\
a_{21}b_{11} + a_{22}b_{21} & a_{21}b_{12} + a_{22}b_{22}
\end{bmatrix}
$$

$$
\bold{A}\bold{B} = \begin{bmatrix}
a_{11} & a_{12} & a_{13} \\
a_{21} & a_{22} & a_{23} \\
a_{31} & a_{32} & a_{33}
\end{bmatrix}
\begin{bmatrix}
b_{11} & b_{12} & b_{13} \\
b_{21} & b_{22} & b_{23} \\
b_{31} & b_{32} & b_{33}
\end{bmatrix} \\
= \begin{bmatrix}
a_{11}b_{11}+a_{12}b_{21}+a_{13}b_{31} & 
a_{11}b_{12}+a_{12}b_{22}+a_{13}b_{32} & 
a_{11}b_{13}+a_{12}b_{23}+a_{13}b_{33} \\

a_{21}b_{11}+a_{22}b_{21}+a_{23}b_{31} & 
a_{21}b_{12}+a_{22}b_{22}+a_{23}b_{32} & 
a_{21}b_{13}+a_{22}b_{23}+a_{23}b_{33} \\

a_{31}b_{11}+a_{32}b_{21}+a_{33}b_{31} & 
a_{31}b_{12}+a_{32}b_{22}+a_{33}b_{32} & 
a_{31}b_{13}+a_{32}b_{23}+a_{33}b_{33} \\
\end{bmatrix}
$$

$$
\bold{M}\bold{I} = \bold{I}\bold{M} = \bold{M} \\
\bold{A}\bold{B} ≠ \bold{B}\bold{A}  \ \ \ 一般情况下 \\
(\bold{A}\bold{B})\bold{C} = \bold{A}(\bold{B}\bold{C}) \\
(k\bold{A})\bold{B} = k(\bold{A}\bold{B}) = \bold{A}(k\bold{B}) \\
(\bold{v}\bold{A})\bold{B} = \bold{v}(\bold{A}\bold{B}) \\
$$

### 矢量和矩阵相乘

$$
\ \begin{bmatrix}
x & y & z 
\end{bmatrix}
\begin{bmatrix}
m_{11} & m_{12} & m_{13} \\
m_{21} & m_{22} & m_{23} \\
m_{31} & m_{32} & m_{33}
\end{bmatrix} =  \\
\begin{bmatrix}
xm_{11} + ym_{21} + zm_{31} & 
xm_{12} + ym_{22} + zm_{32} & 
xm_{13} + ym_{23} + zm_{33}
\end{bmatrix}
$$

$$
\begin{bmatrix}
m_{11} & m_{12} & m_{13} \\
m_{21} & m_{22} & m_{23} \\
m_{31} & m_{32} & m_{33} \\
\end{bmatrix}
\begin{bmatrix}
x\\
y\\
z
\end{bmatrix} = \begin{bmatrix}
xm_{11} + ym_{12} + zm_{13}\\
xm_{21} + ym_{22} + zm_{23}\\
xm_{31} + ym_{32} + zm_{33}
\end{bmatrix}
$$



## 矩阵的几何解释

方形矩阵可以描述任何线性变换(Linear Transformation)
线性变换将保留直线和平行线，并且没有平移(即，原点不移动)就已经足够了

> 旋转 (Rotation)
> 比例缩放(Scale)
> 正交投影(Orthographic Projection)
> 反射(Reflection)
> 错切(Shearing)

$$
\bold{v}\bold{M} = \begin{bmatrix}v_x & v_y & v_z\end{bmatrix}
\begin{bmatrix}
-\bold{p}-\\
-\bold{q}-\\
-\bold{r}-
\end{bmatrix} = v_x\bold{p} + v_y\bold{q} + v_z\bold{r}
$$

$$
\begin{bmatrix}
0.707 & -0.707 & 0 \\
1.250 & 1.250 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

<img src="Image/图4.6.png" alt="图4.6" style="zoom:67%;" />
变换后的茶壶、单位立方体和基矢量

坐标最好被理解为基矢量的线性组合中的系数

- 方形矩阵的行可以解释为**坐标空间的基矢量**。
- 要将矢量**从原始坐标空间变换到新坐标空间**，可以**将矢量乘以矩阵**。
- 从原始坐标空间到由这些基矢量定义的坐标空间的变换是线性变换。**线性变换将保留直线**，平行线也将保持平行。但是，**角度、长度、面积和体积**等可能在变换后**发生改变**。
- 将零矢量乘以任何方形矩阵，得到的是零矢量。因此，由方形矩阵表示的线性变换将具有与原始坐标空间相同的原点，这意味着变换**不包含平移**。
- 我们可以通过可视化变换后坐标空间的**基矢量**来**可视化矩阵**。这些基矢量在二维中会形成 $L$ 形，而在三维中形成的则是三脚架。使用倾斜框或辅助对象也有助于可视化。

